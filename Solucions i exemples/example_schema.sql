--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 9.3.935
--   Created On : lunes, 04 abril, 2016 
--   DBMS       : Oracle 
--   -------------------------------------------------- 



--  Drop Tables, Stored Procedures and Views 
/*
DROP TABLE CUSTOMER CASCADE CONSTRAINTS;
DROP TABLE EMPLOYEE CASCADE CONSTRAINTS;
DROP TABLE PRODUCT CASCADE CONSTRAINTS;
DROP TABLE PRODUCT_CUSTOMER CASCADE CONSTRAINTS;
*/
--  Create Tables 
CREATE TABLE CUSTOMER
(
	ID               NUMBER(8) NOT NULL,
	NAME             VARCHAR2(50) NOT NULL,
	EMPLOYEE_ID      NUMBER(8) NOT NULL,
	SURNAME          VARCHAR2(50),
	PERCENT_PRODUCT  NUMBER(5,2),
	PERCENT_DATE     DATE
);


CREATE TABLE EMPLOYEE
(
	ID                NUMBER(8) NOT NULL,
	NAME              VARCHAR2(50) NOT NULL,
	DATE_OF_BIRTH     DATE NOT NULL,
	SURNAME           VARCHAR2(50),
	PERCENT_CUSTOMER  NUMBER(5,2),
	PERCENT_DATE      DATE
);


CREATE TABLE PRODUCT
(
	ID           NUMBER(8) NOT NULL,
	NAME         VARCHAR(50) NOT NULL,
	DESCRIPTION  VARCHAR2(500)
);


CREATE TABLE PRODUCT_CUSTOMER
(
	PRODUCT_ID     NUMBER(8) NOT NULL,
	CUSTOMER_ID    NUMBER(8) NOT NULL,
	CREATION_DATE  DATE NOT NULL
);

CREATE SEQUENCE SEQ_EMPLOYEE START WITH 1 INCREMENT BY 1;

CREATE SEQUENCE SEQ_CUSTOMER START WITH 1 INCREMENT BY 1;

CREATE SEQUENCE SEQ_PRODUCT START WITH 1 INCREMENT BY 1;

--  Create Primary Key Constraints 
ALTER TABLE CUSTOMER ADD CONSTRAINT PK_CUSTOMER 
	PRIMARY KEY (ID) 
 USING INDEX ;

ALTER TABLE EMPLOYEE ADD CONSTRAINT PK_EMPLOYEE 
	PRIMARY KEY (ID) 
 USING INDEX ;

ALTER TABLE PRODUCT ADD CONSTRAINT PK_PRODUCT 
	PRIMARY KEY (ID) 
 USING INDEX ;

ALTER TABLE PRODUCT_CUSTOMER ADD CONSTRAINT PK_PRODUCT_CUSTOMER 
	PRIMARY KEY (PRODUCT_ID, CUSTOMER_ID) 
 USING INDEX ;



--  Create Foreign Key Constraints 
ALTER TABLE CUSTOMER ADD CONSTRAINT FK_CUSTOMER_EMPLOYEE 
	FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (ID);

ALTER TABLE PRODUCT_CUSTOMER ADD CONSTRAINT FK_PRODUCT_CUSTOMER_CUSTOMER 
	FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER (ID);

ALTER TABLE PRODUCT_CUSTOMER ADD CONSTRAINT FK_PRODUCT_CUSTOMER_PRODUCT 
	FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT (ID);
	

